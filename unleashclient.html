

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>UnleashClient &mdash; unleash-client-python  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Strategy" href="strategy.html" />
    <link rel="prev" title="Running with Celery" href="celery.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> unleash-client-python
          

          
          </a>

          
            
            
              <div class="version">
                5.8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p><span class="caption-text">Basic Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
</ul>
<p><span class="caption-text">Advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="customstrategies.html">Custom Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="customcache.html">Custom Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="eventcallbacks.html">Event Callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="wsgi.html">Running with WSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="celery.html">Running with Celery</a></li>
</ul>
<p><span class="caption-text">API Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">UnleashClient</a></li>
<li class="toctree-l1"><a class="reference internal" href="strategy.html">Strategy</a></li>
<li class="toctree-l1"><a class="reference internal" href="filecache.html">FileCache</a></li>
<li class="toctree-l1"><a class="reference internal" href="basecache.html">BaseCache</a></li>
<li class="toctree-l1"><a class="reference internal" href="events.html">Events</a></li>
</ul>
<p><span class="caption-text">Changelog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">unleash-client-python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>UnleashClient</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/unleash/unleash-client-python/blob/main/docs/unleashclient.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="module-UnleashClient">
<span id="unleashclient"></span><h1>UnleashClient<a class="headerlink" href="#module-UnleashClient" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="UnleashClient.UnleashClient">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">UnleashClient.</span></code><code class="sig-name descname"><span class="pre">UnleashClient</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">url:</span> <span class="pre">str,</span> <span class="pre">app_name:</span> <span class="pre">str,</span> <span class="pre">environment:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'default',</span> <span class="pre">instance_id:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'unleash-client-python',</span> <span class="pre">refresh_interval:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">15,</span> <span class="pre">refresh_jitter:</span> <span class="pre">Optional[int]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">metrics_interval:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">60,</span> <span class="pre">metrics_jitter:</span> <span class="pre">Optional[int]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">disable_metrics:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">disable_registration:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">custom_headers:</span> <span class="pre">Optional[dict]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">custom_options:</span> <span class="pre">Optional[dict]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">custom_strategies:</span> <span class="pre">Optional[dict]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">cache_directory:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">project_name:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">verbose_log_level:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">30,</span> <span class="pre">cache:</span> <span class="pre">Optional[UnleashClient.cache.BaseCache]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">scheduler:</span> <span class="pre">Optional[apscheduler.schedulers.base.BaseScheduler]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">scheduler_executor:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">multiple_instance_mode:</span> <span class="pre">UnleashClient.utils.InstanceAllowType</span> <span class="pre">=</span> <span class="pre">&lt;InstanceAllowType.WARN:</span> <span class="pre">2&gt;,</span> <span class="pre">event_callback:</span> <span class="pre">Optional[Callable[[UnleashClient.events.UnleashEvent],</span> <span class="pre">None]]</span> <span class="pre">=</span> <span class="pre">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#UnleashClient.UnleashClient" title="Permalink to this definition">¶</a></dt>
<dd><p>A client for the Unleash feature toggle system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> – URL of the unleash server, required.</p></li>
<li><p><strong>app_name</strong> – Name of the application using the unleash client, required.</p></li>
<li><p><strong>environment</strong> – Name of the environment using the unleash client, optional &amp; defaults to “default”.</p></li>
<li><p><strong>instance_id</strong> – Unique identifier for unleash client instance, optional &amp; defaults to “unleash-client-python”</p></li>
<li><p><strong>refresh_interval</strong> – Provisioning refresh interval in seconds, optional &amp; defaults to 15 seconds</p></li>
<li><p><strong>refresh_jitter</strong> – Provisioning refresh interval jitter in seconds, optional &amp; defaults to None</p></li>
<li><p><strong>metrics_interval</strong> – Metrics refresh interval in seconds, optional &amp; defaults to 60 seconds</p></li>
<li><p><strong>metrics_jitter</strong> – Metrics refresh interval jitter in seconds, optional &amp; defaults to None</p></li>
<li><p><strong>disable_metrics</strong> – Disables sending metrics to unleash server, optional &amp; defaults to false.</p></li>
<li><p><strong>disable_registration</strong> – Disables registration with unleash server, optional &amp; defaults to false.</p></li>
<li><p><strong>custom_headers</strong> – Default headers to send to unleash server, optional &amp; defaults to empty.</p></li>
<li><p><strong>custom_options</strong> – Default requests parameters, optional &amp; defaults to empty.  Can be used to skip SSL verification.</p></li>
<li><p><strong>custom_strategies</strong> – Dictionary of custom strategy names : custom strategy objects.</p></li>
<li><p><strong>cache_directory</strong> – Location of the cache directory. When unset, FCache will determine the location.</p></li>
<li><p><strong>verbose_log_level</strong> – Numerical log level (<a class="reference external" href="https://docs.python.org/3/library/logging.html#logging-levels">https://docs.python.org/3/library/logging.html#logging-levels</a>) for cases where checking a feature flag fails.</p></li>
<li><p><strong>cache</strong> – Custom cache implementation that extends UnleashClient.cache.BaseCache.  When unset, UnleashClient will use Fcache.</p></li>
<li><p><strong>scheduler</strong> – Custom APScheduler object.  Use this if you want to customize jobstore or executors.  When unset, UnleashClient will create it’s own scheduler.</p></li>
<li><p><strong>scheduler_executor</strong> – Name of APSCheduler executor to use if using a custom scheduler.</p></li>
<li><p><strong>multiple_instance_mode</strong> – Determines how multiple instances being instantiated is handled by the SDK, when set to InstanceAllowType.BLOCK, the client constructor will fail when more than one instance is detected, when set to InstanceAllowType.WARN, multiple instances will be allowed but log a warning, when set to InstanceAllowType.SILENTLY_ALLOW, no warning or failure will be raised when instantiating multiple instances of the client. Defaults to InstanceAllowType.WARN</p></li>
<li><p><strong>event_callback</strong> – Function to call if impression events are enabled.  WARNING: Depending on your event library, this may have performance implications!</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="UnleashClient.UnleashClient.initialize_client">
<code class="sig-name descname"><span class="pre">initialize_client</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fetch_toggles</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#UnleashClient.UnleashClient.initialize_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes client and starts communication with central unleash server(s).</p>
<p>This kicks off:</p>
<ul class="simple">
<li><p>Client registration</p></li>
<li><p>Provisioning poll</p></li>
<li><p>Stats poll</p></li>
</ul>
<p>If <cite>fetch_toggles</cite> is <cite>False</cite>, feature toggle polling will be turned off
and instead the client will only load features from the cache. This is
usually used to cater the multi-process setups, e.g. Django, Celery,
etc.</p>
<p>This will raise an exception on registration if the URL is invalid. It is done automatically if called inside a context manager as in:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">UnleashClient</span><span class="p">(</span>
    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://foo.bar&quot;</span><span class="p">,</span>
    <span class="n">app_name</span><span class="o">=</span><span class="s2">&quot;myClient1&quot;</span><span class="p">,</span>
    <span class="n">instance_id</span><span class="o">=</span><span class="s2">&quot;myinstanceid&quot;</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="UnleashClient.UnleashClient.destroy">
<code class="sig-name descname"><span class="pre">destroy</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#UnleashClient.UnleashClient.destroy" title="Permalink to this definition">¶</a></dt>
<dd><p>Gracefully shuts down the Unleash client by stopping jobs, stopping the scheduler, and deleting the cache.</p>
<p>You shouldn’t need this too much!</p>
</dd></dl>

<dl class="py method">
<dt id="UnleashClient.UnleashClient.is_enabled">
<code class="sig-name descname"><span class="pre">is_enabled</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fallback_function</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="headerlink" href="#UnleashClient.UnleashClient.is_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a feature toggle is enabled.</p>
<p>Notes:</p>
<ul class="simple">
<li><p>If client hasn’t been initialized yet or an error occurs, flat will default to false.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feature_name</strong> – Name of the feature</p></li>
<li><p><strong>context</strong> – Dictionary with context (e.g. IPs, email) for feature toggle.</p></li>
<li><p><strong>fallback_function</strong> – Allows users to provide a custom function to set default value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Feature flag result</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="UnleashClient.UnleashClient.get_variant">
<code class="sig-name descname"><span class="pre">get_variant</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">dict</span><a class="headerlink" href="#UnleashClient.UnleashClient.get_variant" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a feature toggle is enabled.  If so, return variant.</p>
<p>Notes:</p>
<ul class="simple">
<li><p>If client hasn’t been initialized yet or an error occurs, flat will default to false.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feature_name</strong> – Name of the feature</p></li>
<li><p><strong>context</strong> – Dictionary with context (e.g. IPs, email) for feature toggle.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Variant and feature flag status.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="strategy.html" class="btn btn-neutral float-right" title="Strategy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="celery.html" class="btn btn-neutral float-left" title="Running with Celery" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022 Unleash.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>